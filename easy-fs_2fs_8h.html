<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uCore-Tutorial-Code-2022A: easy-fs/fs.h 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uCore-Tutorial-Code-2022A
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('easy-fs_2fs_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">结构体</a> &#124;
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">fs.h 文件参考</div>  </div>
</div><!--header-->
<div class="contents">

<p>On-disk file system format.  
<a href="#details">更多...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="easy-fs_2defs_8h_source.html">defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fs__dependency_8h_source.html">fs_dependency.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
fs.h 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="easy-fs_2fs_8h__incl.png" border="0" usemap="#easy-fs_2fs_8h" alt=""/></div>
<map name="easy-fs_2fs_8h" id="easy-fs_2fs_8h">
<area shape="rect" title="On&#45;disk file system format." alt="" coords="5,5,104,32"/>
<area shape="rect" href="easy-fs_2defs_8h.html" title="规定了uCore项目的所有语义规范，如需开发其它模块，也要遵守该约定，包含类型定义、宏定义和riscv汇编函数" alt="" coords="9,229,71,256"/>
<area shape="rect" href="fs__dependency_8h.html" title=" " alt="" coords="41,80,172,107"/>
<area shape="rect" href="easy-fs_2string_8h.html" title=" " alt="" coords="57,155,127,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
此图展示该文件直接或间接的被哪些文件引用了:</div>
<div class="dyncontent">
<div class="center"><img src="easy-fs_2fs_8h__dep__incl.png" border="0" usemap="#easy-fs_2fs_8hdep" alt=""/></div>
<map name="easy-fs_2fs_8hdep" id="easy-fs_2fs_8hdep">
<area shape="rect" title="On&#45;disk file system format." alt="" coords="893,5,991,32"/>
<area shape="rect" href="file_8h.html" title="Inode content" alt="" coords="843,80,950,107"/>
<area shape="rect" href="file_8c.html" title=" " alt="" coords="728,155,833,181"/>
<area shape="rect" href="easy-fs_2fs_8c.html" title="File system implementation." alt="" coords="857,155,955,181"/>
<area shape="rect" href="fs__module_8h.html" title=" " alt="" coords="979,155,1134,181"/>
<area shape="rect" href="os6_2modules_8h.html" title=" " alt="" coords="333,229,450,256"/>
<area shape="rect" href="os7_2modules_8h.html" title=" " alt="" coords="998,229,1115,256"/>
<area shape="rect" href="os8_2modules_8h.html" title=" " alt="" coords="1550,229,1667,256"/>
<area shape="rect" href="os6_2loader_8h.html" title=" " alt="" coords="295,379,397,405"/>
<area shape="rect" href="os6_2proc_8h.html" title=" " alt="" coords="389,304,479,331"/>
<area shape="rect" href="os6__trap_8h.html" title=" " alt="" coords="154,379,271,405"/>
<area shape="rect" href="os6_2loader_8c.html" title=" " alt="" coords="5,453,105,480"/>
<area shape="rect" href="os6_2main_8c.html" title=" " alt="" coords="130,453,223,480"/>
<area shape="rect" href="os6__syscall_8c.html" title=" " alt="" coords="248,453,383,480"/>
<area shape="rect" href="os6__trap_8c.html" title=" " alt="" coords="407,453,523,480"/>
<area shape="rect" href="os6_2proc_8c.html" title=" " alt="" coords="547,453,635,480"/>
<area shape="rect" href="os7_2loader_8h.html" title=" " alt="" coords="1026,379,1127,405"/>
<area shape="rect" href="os7_2proc_8h.html" title=" " alt="" coords="1095,304,1184,331"/>
<area shape="rect" href="os7__trap_8h.html" title=" " alt="" coords="885,379,1002,405"/>
<area shape="rect" href="os7_2loader_8c.html" title=" " alt="" coords="772,453,872,480"/>
<area shape="rect" href="os7_2main_8c.html" title=" " alt="" coords="897,453,990,480"/>
<area shape="rect" href="os7__syscall_8c.html" title=" " alt="" coords="1015,453,1149,480"/>
<area shape="rect" href="os7__trap_8c.html" title=" " alt="" coords="1173,453,1289,480"/>
<area shape="rect" href="os7_2proc_8c.html" title=" " alt="" coords="659,453,747,480"/>
<area shape="rect" href="os8_2loader_8h.html" title=" " alt="" coords="1634,379,1735,405"/>
<area shape="rect" href="os8_2proc_8h.html" title=" " alt="" coords="1716,304,1805,331"/>
<area shape="rect" href="os8__trap_8h.html" title=" " alt="" coords="1493,379,1610,405"/>
<area shape="rect" href="os8_2loader_8c.html" title=" " alt="" coords="1313,453,1413,480"/>
<area shape="rect" href="os8_2main_8c.html" title=" " alt="" coords="1438,453,1531,480"/>
<area shape="rect" href="os8__syscall_8c.html" title=" " alt="" coords="1556,453,1691,480"/>
<area shape="rect" href="os8__trap_8c.html" title=" " alt="" coords="1715,453,1831,480"/>
<area shape="rect" href="os8_2proc_8c.html" title=" " alt="" coords="1855,453,1943,480"/>
</map>
</div>
</div>
<p><a href="easy-fs_2fs_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
结构体</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsuperblock.html">superblock</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The super block describes the disk layout:  <a href="structsuperblock.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdinode.html">dinode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">On-disk inode structure  <a href="structdinode.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdirent.html">dirent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:ae948f5b79524939bc025b32d25a1fda0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ae948f5b79524939bc025b32d25a1fda0">FSMAGIC</a>&#160;&#160;&#160;0x10203040</td></tr>
<tr class="separator:ae948f5b79524939bc025b32d25a1fda0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd38e9532d4b3623f844b93c012a8e06"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#acd38e9532d4b3623f844b93c012a8e06">NDIRECT</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:acd38e9532d4b3623f844b93c012a8e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d24f098ea2928d61ff80b123d761715"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a6d24f098ea2928d61ff80b123d761715">NINDIRECT</a>&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> / sizeof(<a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>))</td></tr>
<tr class="separator:a6d24f098ea2928d61ff80b123d761715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714b2485a6dd312e37226e1f833728a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a714b2485a6dd312e37226e1f833728a9">MAXFILE</a>&#160;&#160;&#160;(<a class="el" href="nfs_2fs_8h.html#acd38e9532d4b3623f844b93c012a8e06">NDIRECT</a> + <a class="el" href="nfs_2fs_8h.html#a6d24f098ea2928d61ff80b123d761715">NINDIRECT</a>)</td></tr>
<tr class="separator:a714b2485a6dd312e37226e1f833728a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91136bcd71a9f499304f5d7e7e9d6376"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a91136bcd71a9f499304f5d7e7e9d6376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a8afbed81f5fb3930e9d153fbd51737"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a0a8afbed81f5fb3930e9d153fbd51737">T_FILE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a0a8afbed81f5fb3930e9d153fbd51737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb6c866a6d0a173f5f0a6ed9c7e0228"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a>&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> / sizeof(struct <a class="el" href="structdinode.html">dinode</a>))</td></tr>
<tr class="memdesc:aadb6c866a6d0a173f5f0a6ed9c7e0228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inodes per block.  <a href="easy-fs_2fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">更多...</a><br /></td></tr>
<tr class="separator:aadb6c866a6d0a173f5f0a6ed9c7e0228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a5b990015f0f86e5d4c6b21d38ffa0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">IBLOCK</a>(i,  <a class="el" href="nfs_2fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>)&#160;&#160;&#160;((i) / <a class="el" href="nfs_2fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a> + sb.inodestart)</td></tr>
<tr class="memdesc:ac9a5b990015f0f86e5d4c6b21d38ffa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block containing inode i  <a href="easy-fs_2fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">更多...</a><br /></td></tr>
<tr class="separator:ac9a5b990015f0f86e5d4c6b21d38ffa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c88fd21abb83ef11461ce750c466828"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a3c88fd21abb83ef11461ce750c466828">BPB</a>&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> * 8)</td></tr>
<tr class="memdesc:a3c88fd21abb83ef11461ce750c466828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmap bits per block  <a href="easy-fs_2fs_8h.html#a3c88fd21abb83ef11461ce750c466828">更多...</a><br /></td></tr>
<tr class="separator:a3c88fd21abb83ef11461ce750c466828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080eb729016328ec6da85bfe125fc04c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a080eb729016328ec6da85bfe125fc04c">BBLOCK</a>(<a class="el" href="virtio__disk_8c.html#a478a43f541f7e29b957eaaef78d660d4">b</a>,  <a class="el" href="nfs_2fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>)&#160;&#160;&#160;((<a class="el" href="virtio__disk_8c.html#a478a43f541f7e29b957eaaef78d660d4">b</a>) / <a class="el" href="nfs_2fs_8h.html#a3c88fd21abb83ef11461ce750c466828">BPB</a> + sb.bmapstart)</td></tr>
<tr class="memdesc:a080eb729016328ec6da85bfe125fc04c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block of free map containing bit for block b  <a href="easy-fs_2fs_8h.html#a080eb729016328ec6da85bfe125fc04c">更多...</a><br /></td></tr>
<tr class="separator:a080eb729016328ec6da85bfe125fc04c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48246fb9e5cb7f6a71ebc9ebc2f06562"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>&#160;&#160;&#160;14</td></tr>
<tr class="memdesc:a48246fb9e5cb7f6a71ebc9ebc2f06562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory is a file containing a sequence of dirent structures.  <a href="easy-fs_2fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">更多...</a><br /></td></tr>
<tr class="separator:a48246fb9e5cb7f6a71ebc9ebc2f06562"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ade00044090adbc765c80c6cc81dae79d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ade00044090adbc765c80c6cc81dae79d">fsinit</a> ()</td></tr>
<tr class="memdesc:ade00044090adbc765c80c6cc81dae79d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init fs  <a href="easy-fs_2fs_8h.html#ade00044090adbc765c80c6cc81dae79d">更多...</a><br /></td></tr>
<tr class="separator:ade00044090adbc765c80c6cc81dae79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ccea0aa02557162963e597737f665a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ae4ccea0aa02557162963e597737f665a">dirlink</a> (struct <a class="el" href="structinode.html">inode</a> *, char *, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="memdesc:ae4ccea0aa02557162963e597737f665a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a new directory entry (name, inum) into the directory dp.  <a href="easy-fs_2fs_8h.html#ae4ccea0aa02557162963e597737f665a">更多...</a><br /></td></tr>
<tr class="separator:ae4ccea0aa02557162963e597737f665a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ded9e61402d5e0d9f16b2a8cbff5c3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a91ded9e61402d5e0d9f16b2a8cbff5c3">dirlookup</a> (struct <a class="el" href="structinode.html">inode</a> *, char *, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *)</td></tr>
<tr class="separator:a91ded9e61402d5e0d9f16b2a8cbff5c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d7f391ca5219199e1b7502ac12ea85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ab4d7f391ca5219199e1b7502ac12ea85">ialloc</a> (<a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, short)</td></tr>
<tr class="separator:ab4d7f391ca5219199e1b7502ac12ea85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd1de79a331b8922c483434d257731d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#acdd1de79a331b8922c483434d257731d">idup</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="separator:acdd1de79a331b8922c483434d257731d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa622d795dbff5b741d36977d57114df6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#aa622d795dbff5b741d36977d57114df6">iinit</a> ()</td></tr>
<tr class="separator:aa622d795dbff5b741d36977d57114df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044ea282f2687394ec2907a272300a67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a044ea282f2687394ec2907a272300a67">ivalid</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a044ea282f2687394ec2907a272300a67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the inode from disk if necessary.  <a href="easy-fs_2fs_8h.html#a044ea282f2687394ec2907a272300a67">更多...</a><br /></td></tr>
<tr class="separator:a044ea282f2687394ec2907a272300a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29530a0afdfe924818d8c70b6724528d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="separator:a29530a0afdfe924818d8c70b6724528d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af301c10ad8ced77a5dfb2de3a64c666c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="separator:af301c10ad8ced77a5dfb2de3a64c666c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff5bb5a1eeaf921853ec06479f8c49b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="separator:adff5bb5a1eeaf921853ec06479f8c49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee6784c123b2a2656d88b5b357f2253"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="separator:a2ee6784c123b2a2656d88b5b357f2253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29aa723e0b59f069c9eba588fdeb7e5a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a29aa723e0b59f069c9eba588fdeb7e5a">namei</a> (char *)</td></tr>
<tr class="memdesc:a29aa723e0b59f069c9eba588fdeb7e5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the corresponding inode according to the path  <a href="easy-fs_2fs_8h.html#a29aa723e0b59f069c9eba588fdeb7e5a">更多...</a><br /></td></tr>
<tr class="separator:a29aa723e0b59f069c9eba588fdeb7e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a298e28260b8b4ef0396fc411b42c46e5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a298e28260b8b4ef0396fc411b42c46e5">root_dir</a> ()</td></tr>
<tr class="memdesc:a298e28260b8b4ef0396fc411b42c46e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the inode of the root directory  <a href="easy-fs_2fs_8h.html#a298e28260b8b4ef0396fc411b42c46e5">更多...</a><br /></td></tr>
<tr class="separator:a298e28260b8b4ef0396fc411b42c46e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673c385445697ec6e612dd620b7dfe28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a673c385445697ec6e612dd620b7dfe28">readi</a> (struct <a class="el" href="structinode.html">inode</a> *, int, <a class="el" href="console_2defs_8h.html#a5975ce0896ee5ec5db2f1a411620a51a">uint64</a>, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a673c385445697ec6e612dd620b7dfe28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834a2cc6bc3d23b2e7feb4b4b9fb02da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a834a2cc6bc3d23b2e7feb4b4b9fb02da">writei</a> (struct <a class="el" href="structinode.html">inode</a> *, int, <a class="el" href="console_2defs_8h.html#a5975ce0896ee5ec5db2f1a411620a51a">uint64</a>, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a834a2cc6bc3d23b2e7feb4b4b9fb02da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6099dc028515236a7f723cb388858435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#a6099dc028515236a7f723cb388858435">itrunc</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a6099dc028515236a7f723cb388858435"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate inode (discard contents).  <a href="easy-fs_2fs_8h.html#a6099dc028515236a7f723cb388858435">更多...</a><br /></td></tr>
<tr class="separator:a6099dc028515236a7f723cb388858435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a2f2501e39b39a4aa1bd7ab5336786"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="easy-fs_2fs_8h.html#ac7a2f2501e39b39a4aa1bd7ab5336786">dirls</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:ac7a2f2501e39b39a4aa1bd7ab5336786"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show the filenames of all files in the directory  <a href="easy-fs_2fs_8h.html#ac7a2f2501e39b39a4aa1bd7ab5336786">更多...</a><br /></td></tr>
<tr class="separator:ac7a2f2501e39b39a4aa1bd7ab5336786"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>On-disk file system format. </p>
<p>the kernel and user programs use this header file. <br  />
 Disk layout: <br  />
[ boot block | super block | inode blocks | free bit map | data blocks] <br  />
 mkfs computes the super block and builds an initial file system. </p>
</div><h2 class="groupheader">宏定义说明</h2>
<a id="a080eb729016328ec6da85bfe125fc04c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080eb729016328ec6da85bfe125fc04c">&#9670;&nbsp;</a></span>BBLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BBLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="virtio__disk_8c.html#a478a43f541f7e29b957eaaef78d660d4">b</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="nfs_2fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((<a class="el" href="virtio__disk_8c.html#a478a43f541f7e29b957eaaef78d660d4">b</a>) / <a class="el" href="nfs_2fs_8h.html#a3c88fd21abb83ef11461ce750c466828">BPB</a> + sb.bmapstart)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block of free map containing bit for block b </p>

</div>
</div>
<a id="a3c88fd21abb83ef11461ce750c466828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c88fd21abb83ef11461ce750c466828">&#9670;&nbsp;</a></span>BPB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> * 8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bitmap bits per block </p>

</div>
</div>
<a id="a48246fb9e5cb7f6a71ebc9ebc2f06562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48246fb9e5cb7f6a71ebc9ebc2f06562">&#9670;&nbsp;</a></span>DIRSIZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIRSIZ&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory is a file containing a sequence of dirent structures. </p>

</div>
</div>
<a id="ae948f5b79524939bc025b32d25a1fda0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae948f5b79524939bc025b32d25a1fda0">&#9670;&nbsp;</a></span>FSMAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSMAGIC&#160;&#160;&#160;0x10203040</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac9a5b990015f0f86e5d4c6b21d38ffa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a5b990015f0f86e5d4c6b21d38ffa0">&#9670;&nbsp;</a></span>IBLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IBLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="nfs_2fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((i) / <a class="el" href="nfs_2fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a> + sb.inodestart)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block containing inode i </p>

</div>
</div>
<a id="aadb6c866a6d0a173f5f0a6ed9c7e0228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadb6c866a6d0a173f5f0a6ed9c7e0228">&#9670;&nbsp;</a></span>IPB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPB&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> / sizeof(struct <a class="el" href="structdinode.html">dinode</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inodes per block. </p>

</div>
</div>
<a id="a714b2485a6dd312e37226e1f833728a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a714b2485a6dd312e37226e1f833728a9">&#9670;&nbsp;</a></span>MAXFILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXFILE&#160;&#160;&#160;(<a class="el" href="nfs_2fs_8h.html#acd38e9532d4b3623f844b93c012a8e06">NDIRECT</a> + <a class="el" href="nfs_2fs_8h.html#a6d24f098ea2928d61ff80b123d761715">NINDIRECT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acd38e9532d4b3623f844b93c012a8e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd38e9532d4b3623f844b93c012a8e06">&#9670;&nbsp;</a></span>NDIRECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDIRECT&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6d24f098ea2928d61ff80b123d761715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d24f098ea2928d61ff80b123d761715">&#9670;&nbsp;</a></span>NINDIRECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NINDIRECT&#160;&#160;&#160;(<a class="el" href="utils_2defs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> / sizeof(<a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a91136bcd71a9f499304f5d7e7e9d6376"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91136bcd71a9f499304f5d7e7e9d6376">&#9670;&nbsp;</a></span>T_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_DIR&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0a8afbed81f5fb3930e9d153fbd51737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a8afbed81f5fb3930e9d153fbd51737">&#9670;&nbsp;</a></span>T_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_FILE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="ae4ccea0aa02557162963e597737f665a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ccea0aa02557162963e597737f665a">&#9670;&nbsp;</a></span>dirlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dirlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a new directory entry (name, inum) into the directory dp. </p>

</div>
</div>
<a id="a91ded9e61402d5e0d9f16b2a8cbff5c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ded9e61402d5e0d9f16b2a8cbff5c3">&#9670;&nbsp;</a></span>dirlookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* dirlookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>poff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look for a directory entry in a directory. If found, set *poff to byte offset of entry. </p>

</div>
</div>
<a id="ac7a2f2501e39b39a4aa1bd7ab5336786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a2f2501e39b39a4aa1bd7ab5336786">&#9670;&nbsp;</a></span>dirls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dirls </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Show the filenames of all files in the directory </p>

</div>
</div>
<a id="ade00044090adbc765c80c6cc81dae79d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade00044090adbc765c80c6cc81dae79d">&#9670;&nbsp;</a></span>fsinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsinit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init fs </p>

</div>
</div>
<a id="ab4d7f391ca5219199e1b7502ac12ea85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d7f391ca5219199e1b7502ac12ea85">&#9670;&nbsp;</a></span>ialloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* ialloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate an inode on device dev. Mark it as allocated by giving it type <code>type</code>. Returns an allocated and referenced inode. </p>

</div>
</div>
<a id="acdd1de79a331b8922c483434d257731d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdd1de79a331b8922c483434d257731d">&#9670;&nbsp;</a></span>idup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* idup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increment reference count for ip. Returns ip to enable ip = idup(ip1) idiom. </p>

</div>
</div>
<a id="aa622d795dbff5b741d36977d57114df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa622d795dbff5b741d36977d57114df6">&#9670;&nbsp;</a></span>iinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iinit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a29530a0afdfe924818d8c70b6724528d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29530a0afdfe924818d8c70b6724528d">&#9670;&nbsp;</a></span>iput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drop a reference to an in-memory inode. <br  />
If that was the last reference, the inode table entry can be recycled. If that was the last reference and the inode has no links to it, free the inode (and its content) on disk. <br  />
All calls to <a class="el" href="easy-fs_2fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b">iput()</a> must be inside a transaction in case it has to free the inode. </p>

</div>
</div>
<a id="a6099dc028515236a7f723cb388858435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6099dc028515236a7f723cb388858435">&#9670;&nbsp;</a></span>itrunc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void itrunc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate inode (discard contents). </p>

</div>
</div>
<a id="af301c10ad8ced77a5dfb2de3a64c666c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af301c10ad8ced77a5dfb2de3a64c666c">&#9670;&nbsp;</a></span>iunlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adff5bb5a1eeaf921853ec06479f8c49b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adff5bb5a1eeaf921853ec06479f8c49b">&#9670;&nbsp;</a></span>iunlockput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlockput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ee6784c123b2a2656d88b5b357f2253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee6784c123b2a2656d88b5b357f2253">&#9670;&nbsp;</a></span>iupdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iupdate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy a modified in-memory inode to disk. Must be called after every change to an ip-&gt;xxx field that lives on disk. </p>

</div>
</div>
<a id="a044ea282f2687394ec2907a272300a67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044ea282f2687394ec2907a272300a67">&#9670;&nbsp;</a></span>ivalid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ivalid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the inode from disk if necessary. </p>

</div>
</div>
<a id="a29aa723e0b59f069c9eba588fdeb7e5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29aa723e0b59f069c9eba588fdeb7e5a">&#9670;&nbsp;</a></span>namei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* namei </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the corresponding inode according to the path </p>

</div>
</div>
<a id="a673c385445697ec6e612dd620b7dfe28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673c385445697ec6e612dd620b7dfe28">&#9670;&nbsp;</a></span>readi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a5975ce0896ee5ec5db2f1a411620a51a">uint64</a>&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data from inode. If user_dst==1, then dst is a user virtual address; otherwise, dst is a kernel address. </p>

</div>
</div>
<a id="a298e28260b8b4ef0396fc411b42c46e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a298e28260b8b4ef0396fc411b42c46e5">&#9670;&nbsp;</a></span>root_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* root_dir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the inode of the root directory </p>

</div>
</div>
<a id="a834a2cc6bc3d23b2e7feb4b4b9fb02da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a834a2cc6bc3d23b2e7feb4b4b9fb02da">&#9670;&nbsp;</a></span>writei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int writei </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a5975ce0896ee5ec5db2f1a411620a51a">uint64</a>&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="console_2defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write data to inode. <br  />
Caller must hold ip-&gt;lock. <br  />
If user_src==1, then src is a user virtual address; otherwise, src is a kernel address. <br  />
Returns the number of bytes successfully written. <br  />
If the return value is less than the requested n, there was an error of some kind. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d3f582bb2fa850a4222b3790cad57e7c.html">easy-fs</a></li><li class="navelem"><a class="el" href="easy-fs_2fs_8h.html">fs.h</a></li>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
